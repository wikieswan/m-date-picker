!function(d){function t(d){var t=d.replace(/px/,"");return 1*t}function i(d){return 10>d&&(d="0"+d),d}function o(d,t){return new Date(t,d,0).getDate()}function e(t,i){"undefined"==typeof i?d(t).find(".md-row").removeClass("md-row-0").removeClass("md-row-1").removeClass("md-row-2"):d(d(t).find(".md-row")[i]).removeClass("md-row-0").removeClass("md-row-1").removeClass("md-row-2")}function a(t){var i=d(t).css("top");return i=$.px2number(i)}function m(d){"undefined"==typeof d&&(d="");var t=d+(new Date).getTime()+""+Math.round(1e4*Math.random(0,1));return t}function n(t,i){return d(t).siblings(".md-col-items").hasClass(i)}function c(d,t,i,o){var e=.005,a=d-t,m=i-o,n=2*m/a,c=n*n/2/e;return n>0||(c=-1*c),c}function s(t,i,o){var e=$.px2number(d(t).css("height")),a=e/40;40*(7-a)>i?i=40*(7-a):i>0&&(i=0),i=40*Math.round(i/40),d(t).css({transition:"top 1s","-webkit-transition":"top 1s",top:i}),d(t).attr("val",k(i,o)),setTimeout(function(){var e=i/40,a=-(e-4)%o,m=40*-(o+a-4);d(t).css({transition:"top 0s","-webkit-transition":"0s",top:m})},1e3)}function l(t,i,o){var e=$.px2number(d(t).css("height")),a=e/40;40*(4-a)>i?i=40*(4-a):i>120&&(i=120),i=40*Math.round(i/40),d(t).css({transition:"top 1s","-webkit-transition":"top 1s",top:i}),d(t).attr("val",g(i)),setTimeout(function(){"function"==typeof o&&o()},1e3)}function v(t,i){var o=$.getTargetTopNumber(t),e=o+i/10,a=$.px2number(d(t).css("height")),m=a/40;return 40*(3.5-m)>e||e>140?!1:void d(t).css({transition:"top 0s","-webkit-transition":"0s",top:e})}function r(t){"undefined"==typeof t&&(t=(new Date).format("yyyy"),t=1*t);for(var i=1970,o="",e=0;60>e;e++)o+='<div class="md-item">'+(i+e)+"</div>";d(".md-year").html(o),d(".md-year").css("top",40*(1970-t+3)),d(".md-year").attr("val",t)}function u(d){"undefined"==typeof d&&(d=(new Date).format("MM")),b(".md-month",d,12,1,1)}function h(){var d=w(),t=x(),i=T(),o=$.daysInMonth(t,i);b(".md-day",d,o,1)}function y(d,t,i){"undefined"==typeof i&&(i=(new Date).format("yyyy")),"undefined"==typeof t&&(t=(new Date).format("MM")),"undefined"==typeof d&&(d=(new Date).format("dd")),d=1*d,t=1*t,i=1*i;var o=$.daysInMonth(t,i);b(".md-day",d,o,1)}function f(d){"undefined"==typeof d&&(d=(new Date).format("hh")),b(".md-hour",d,24,0)}function p(d){"undefined"==typeof hour&&(d=(new Date).format("mm")),b(".md-min",d,60,0)}function b(t,i,o,e){i=1*i;for(var a="",m=0;3>m;m++)for(var n=0+e;o+e>n;n++)a+='<div class="md-item">'+$.number2Str(n)+"</div>";d(t).css("top",40*(3+e-i-o)),d(t).html(a),d(t).attr("val",i)}function g(d){d=-1*d;var t=d/40+3+1970;return t}function k(d,t){var i=d/40,o=-(i-4)%t;return o}function T(){return C(".md-year")}function x(){return C(".md-month")}function w(){return C(".md-day")}function D(){return C(".md-hour")}function M(){return C(".md-min")}function C(t){return 1*d(t).attr("val")}function S(d){return!1}function Y(t){var i,o,e={mode:"date",defaultDate:new Date,okText:"Ok",cancelText:"Cancel",onDateChange:S,onCancel:S,unitVisiable:!0,local:"en"},a=this;t=d.extend(e,t),i=$.local[t.local],t.okText="Ok"==t.okText&&"zh"==t.local?i.okText:t.okText,t.cancelText="Cancel"==t.cancelText&&"zh"==t.local?i.cancelText:t.cancelText,o=R(t,i),a.ops=t,a.obj=d(o),d.mdatepickerHandle={handleCancel:function(){t.onCancel(),a.hide()},handleDateChange:function(){var d=a.val();t.onDateChange(d),a.hide()}}}function R(d,t){var i="",o="",e="",a="";return a='<div class="md-head">					<div class="md-btn md-cancel" ontouchend="$.mdatepickerHandle.handleCancel()">'+d.cancelText+'</div>					<div class="md-btn md-sure" ontouchend="$.mdatepickerHandle.handleDateChange()">'+d.okText+"</div>				</div>","date"===d.mode?(o='<div class="md-body">					<div class="md-col md-col-3">						<div class="md-col-mask"></div>						<div class="md-col-indicator"></div>						<div class="md-col-items md-year"></div>					</div>					<div class="md-col md-col-3">						<div class="md-col-mask"></div>						<div class="md-col-indicator"></div>						<div class="md-col-items md-month"></div>					</div>					<div class="md-col md-col-3">						<div class="md-col-mask"></div>						<div class="md-col-indicator"></div>						<div class="md-col-items md-day"></div>					</div>				</div>',e='<div class="md-unit">					<div class="md-col md-col-3">						<div class="md-col-unit">'+t.year+'</div>					</div>					<div class="md-col md-col-3">						<div class="md-col-unit">'+t.month+'</div>					</div>					<div class="md-col md-col-3">						<div class="md-col-unit">'+t.day+"</div>					</div>				</div>"):"time"===d.mode?(o='<div class="md-body">					<div class="md-col md-col-2">						<div class="md-col-mask"></div>						<div class="md-col-indicator"></div>						<div class="md-col-items md-hour"></div>					</div>					<div class="md-col md-col-2">						<div class="md-col-mask"></div>						<div class="md-col-indicator"></div>						<div class="md-col-items md-min"></div>					</div>				</div>',e='<div class="md-unit">					<div class="md-col md-col-2">						<div class="md-col-unit">'+t.hour+'</div>					</div>					<div class="md-col md-col-2">						<div class="md-col-unit">'+t.minute+"</div>					</div>				</div>"):"datetime"===d.mode?(o='<div class="md-body">					<div class="md-col md-col-5">						<div class="md-col-mask"></div>						<div class="md-col-indicator"></div>						<div class="md-col-items md-year"></div>					</div>					<div class="md-col md-col-5">						<div class="md-col-mask"></div>						<div class="md-col-indicator"></div>						<div class="md-col-items md-month"></div>					</div>					<div class="md-col md-col-5">						<div class="md-col-mask"></div>						<div class="md-col-indicator"></div>						<div class="md-col-items md-day"></div>					</div>					<div class="md-col md-col-5">						<div class="md-col-mask"></div>						<div class="md-col-indicator"></div>						<div class="md-col-items md-hour"></div>					</div>					<div class="md-col md-col-5">						<div class="md-col-mask"></div>						<div class="md-col-indicator"></div>						<div class="md-col-items md-min"></div>					</div>				</div>',e='<div class="md-unit">					<div class="md-col md-col-5">						<div class="md-col-unit">'+t.year+'</div>					</div>					<div class="md-col md-col-5">						<div class="md-col-unit">'+t.month+'</div>					</div>					<div class="md-col md-col-5">						<div class="md-col-unit">'+t.day+'</div>					</div>					<div class="md-col md-col-5">						<div class="md-col-unit">'+t.hour+'</div>					</div>					<div class="md-col md-col-5">						<div class="md-col-unit">'+t.minute+"</div>					</div>				</div>"):"datemonth"===d.mode?(o='<div class="md-body">					<div class="md-col md-col-2">						<div class="md-col-mask"></div>						<div class="md-col-indicator"></div>						<div class="md-col-items md-year"></div>					</div>					<div class="md-col md-col-2">						<div class="md-col-mask"></div>						<div class="md-col-indicator"></div>						<div class="md-col-items md-month"></div>					</div>				</div>',e='<div class="md-unit">					<div class="md-col md-col-2">						<div class="md-col-unit">'+t.year+'</div>					</div>					<div class="md-col md-col-2">						<div class="md-col-unit">'+t.month+"</div>					</div>				</div>"):console.error("mode error,'date' enum('date', 'time', 'datetime','datemonth')"),e=d.unitVisiable?e:"",i='<div class="md-overlayer">			<div class="md-wrap">'+a+e+o+"</div>		</div>"}Date.prototype.format=function(d){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(d)&&(d=d.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in t)new RegExp("("+i+")").test(d)&&(d=d.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return d};var $={};$.px2number=t,$.number2Str=i,$.daysInMonth=o,$.cleanStyle=e,$.getTargetTopNumber=a,$.getRandomId=m,$.local={en:{cancelText:"Cancel",okText:"Ok",year:"year",month:"month",day:"day",hour:"hour",minute:"minute"},zh:{cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",year:"\u5e74",month:"\u6708",day:"\u65e5",hour:"\u65f6",minute:"\u5206"}};var E,I,H,j,z,O,N,V,q;d("body").on("touchstart",".md-col-mask",function(d){var t=d.changedTouches[0];n(this,"md-year")?(E=t.clientY,I=d.timeStamp):n(this,"md-month")?(H=t.clientY,j=d.timeStamp):n(this,"md-day")?(yDayStart=t.clientY,z=d.timeStamp):n(this,"md-hour")?(O=t.clientY,N=d.timeStamp):n(this,"md-min")&&(V=t.clientY,q=d.timeStamp)}),d("body").on("touchmove",".md-col-mask",function(d){var t,i,o=d.changedTouches[0];t=o.clientY,i=d.timeStamp,n(this,"md-year")?v(".md-year",t-E):n(this,"md-month")?v(".md-month",t-H):n(this,"md-day")?v(".md-day",t-yDayStart):n(this,"md-hour")?v(".md-hour",t-O):n(this,"md-min")&&v(".md-min",t-V)}),d("body").on("touchend",".md-col-mask",function(d){var t,i,o,e,m,v,r,u=d.changedTouches[0];t=u.clientY,i=d.timeStamp,n(this,"md-year")?(o=a(".md-year"),e=c(i,I,t,E),o+=e,l(".md-year",o),h()):n(this,"md-month")?(o=a(".md-month"),e=c(i,j,t,H),o+=e,s(".md-month",o,12),h()):n(this,"md-day")?(v=T(),r=x(),m=$.daysInMonth(r,v),o=a(".md-day"),e=c(i,z,t,yDayStart),o+=e,s(".md-day",o,m)):n(this,"md-hour")?(o=a(".md-hour"),e=c(i,N,t,O),o+=e,s(".md-hour",o,24)):n(this,"md-min")&&(o=a(".md-min"),e=c(i,q,t,V),o+=e,s(".md-min",o,60))}),r(),u(),y(),f(),p(),d.mdatepicker=function(d){return new Y(d)},Y.prototype.show=function(){var t=this.ops,i=new Date(t.defaultDate);year=i.format("yyyy"),month=i.format("MM"),day=i.format("dd"),hour=i.format("hh"),minute=i.format("mm"),this.obj.appendTo("body"),"date"===t.mode?(r(year),u(month),y(day)):"time"===t.mode?(f(hour),p(minute)):"datetime"===t.mode?(r(year),u(month),y(day),f(hour),p(minute)):"datemonth"===t.mode&&(r(year),u(month)),this.bodyTouchmove=d("body").attr("ontouchmove"),console.log(this.bodyTouchmove),d("body").attr("ontouchmove","event.preventDefault()")},Y.prototype.hide=function(){var t=this;setTimeout(function(){d(t.obj).remove()},300),d("body").attr("ontouchmove",this.bodyTouchmove)},Y.prototype.val=function(){var d,t=this.ops,i=T(),o=x(),e=w(),a=D(),m=M();return"date"===t.mode?d=i+"/"+o+"/"+e:"time"===t.mode?d=a+":"+m:"datetime"===t.mode?d=i+"/"+o+"/"+e+" "+a+":"+m:"datemonth"===t.mode&&(d=i+"/"+o),d}}(Zepto);